{% extends 'cookhub/base.html' %}
{% load staticfiles %}

{% block title_block %}
{% ifequal user.username selected_user.username %}
My Profile
{% else %}
Profile of {{ selected_user.username }}
{% endifequal %}
<!-- Depending on who's watching, "My Profile" or the username is displayed -->
{% endblock %}

{% block body_block %}
<div class="jumbotron p-4">
    <div class="container">
        <h1 class="jumbotron-heading">{% ifequal user.username selected_user.username %}My{% else %}{{ selected_user.username }}'s{% endifequal %} Profile</h1>
        <!-- Depending on who's watching, "My" or the username is displayed -->
    </div>
</div>

<div class="container">
    <div class="row">
        <img src="{{ MEDIA_URL }}{{ user_profile.picture }}"
                width="150"
                height="150"
                alt="{{ selected_user.username }}'s profile image" />
            <br />
        <div class="card-text-title" >
            First Name: {{ selected_user.first_name }}<br />
            Last Name: {{ selected_user.last_name }}<br />
            User Name: {{ selected_user.username }}<br />
            Email: {{ selected_user.email }}<br />
            {% if selected_user == user %}
                    <a href="{% url 'cookhub:edit_profile' user.username %}">Edit Profile</a>   
            {% endif %}
        </div> 
    </div>
</div>


<div class="album py-5 bg-light">
    <div class="container">
    
    <table>
    <tbody>
    <tr>
        <h2> {% ifequal user.username selected_user.username %}My{% else %}{{ selected_user.username }}'s{% endifequal %} recipes </h2>
        <!-- Depending on who's watching, "My" or the username is displayed -->
    </tr>
    <tr>
        <div class="row" id="my">
        </div>
    </tr>
    <tr>
            <div align="center" >
            <button class="previous round" id="my" >&laquo; Previous</button>
            <strong><em id="MyRecipePage" >   1   </em></strong>
            <button class="next round" id="my" >Next &raquo;</button>
            </div>
    </tr>
        </div>
    <hr />
        {% ifequal user.username selected_user.username %}
        {% if user.is_authenticated %}
        <!-- only available if the user looking at the profile is the owner -->  
    <tr>
        <h2> Saved recipes </h2>
    </tr>
    <tr>
        <div class="row" id="saved">
        </div>
        
    </tr>
    <tr>
            <div align="center" >
            <button class="previous round" id="saved" >&laquo; Previous</button>
            <strong><em id="SavedRecipePage" >   1   </em></strong>
            <button class="next round" id="saved" >Next &raquo;</button>
            </div>
    </tr>
        </div>
        {% endif %}
        {% endifequal %}
    </tbody>
    </table>
    </div>
</div>


<script type="text/javascript" src="{% static 'js/profile.js' %}"></script>
    <script type="text/javascript">
    $(document).ready(function () {
        // parameters for profile.js
        var authenticated = "{{ user.is_authenticated }}";
        var MyRecipePages = {{ MyRecipePages }};
        var SavedRecipePages = {{ SavedRecipePages }};
        var recipe_pagination = "{% url 'cookhub:recipe_pagination' %}";
        var selected_user = "{{ selected_user.username }}";
        var save_recipe = "{% url 'cookhub:save_recipe' %}";
        var csrf_token = "{{ csrf_token }}";
        start(authenticated, MyRecipePages, SavedRecipePages, recipe_pagination, selected_user, save_recipe, csrf_token);
           
    });
    </script>
<style>
    a {
         text-decoration: none;
         display: inline-block;
         padding: 8px 16px;
    }
        
    a.previous:hover {
          background-color: #ddd;
          color: black;
    }
        
    .previous .next {
          background-color: #f1f1f1;
          color: black;
    }
        
    .round {
          border-radius: 50%;
    }
</style>
{% endblock %}