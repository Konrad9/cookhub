{% extends 'cookhub/base.html' %}
{% load staticfiles %}

{% block title_block %}
    Homepage
{% endblock %}

{% block body_block %}
    <main role="main">

        <div class="album p-0 m-0 py-5">
            <div class="container">
                <table>
                    <tbody>
                    <tr>
                        <h2 class="card-section p-1"> NEWEST RECIPES <br/></h2>
                    </tr>
                    <tr>
                        <div class="row" id="newest">
                        </div>
                    </tr>
                    <tr>
                        <div align="center">
                            <button class="previous btn btn-outline-warning my-2 my-sm-0" id="newest">&laquo; Previous</button>
                            <strong><em class="pr-2 pl-2" id="NewestRecipePage" style="color: white"> 1 </em></strong>
                            <button class="next btn btn-outline-warning my-2 my-sm-0" id="newest">Next &raquo;</button>
                        </div>
                    </tr>
            <hr/>
            <tr>
                <h2 class="card-section p-1"> POPULAR RECIPES <br/></h2>
            </tr>
            <tr>
                <div class="row" id="popular">
                </div>

            </tr>
            <tr>
                <div align="center">
                    <button class="previous btn btn-outline-warning my-2 my-sm-0" id="popular">&laquo; Previous</button>
                    <strong><em class="pr-2 pl-2" id="PopularRecipePage" style="color: white"> 1 </em></strong>
                    <button class="next btn btn-outline-warning my-2 my-sm-0" id="popular">Next &raquo;</button>
                </div>
            </tr>
            </tbody>
            </table>
        </div>
        </div>

    </main>
    <style>
        .card-text {
            color: #272727;
            font-weight: 500
        }

        /* CSS link color */
        a {
            text-decoration: none;
            display: inline-block;
            padding: 8px 16px;
        }

        a.previous:hover {
            background-color: #ddd;
            color: black;
        }

        .previous .next {
            background-color: #f1f1f1;
            color: black;
        }

        .round {
            border-radius: 50%;
        }

        .album {
            background-color: #343434;
        }

        .card {
            background-color: #252525;
        }

        .card-text-title {
            color: #ffd32d;
        }

        .card-text-author {
            color: #f5f2ff;
        }

        .card-text-rating {
            color: #867a7f;
        }

        .card-section {
            color: #fff9f8;
        }

        h2 {
            font-size: 1.6rem;
        }




    </style>

    <script type="text/javascript">
        $(document).ready(function () {
            $("button.previous").attr("disabled", true);

            var RecipesPerPage = "3";
            var author = "#";
            var which = "newest";
            var nextPageNumber = 1;
            var page = nextPageNumber.toString();
            var single = "0"; // 1-based counting; if only one recipe from the page: 0 is NOT a single one
            var element = "div.row#newest";
            var url = "{% url 'cookhub:recipe_pagination' %}";
            {% if user.is_authenticated %}
                var buttons = "yes";
            {% else %}
                var buttons = "";
            {% endif %}
            if (nextPageNumber =={{ NewestRecipePages }}) {
                $("button.next#newest").attr("disabled", true);
            }
            $("em#NewestRecipePage").text("   " + page + "   ");
            RecipeGetter(RecipesPerPage, author, which, page, single, element, url, buttons);

            which = "popular";
            element = "div.row#popular";
            if (nextPageNumber =={{ PopularRecipePages }}) {
                $("button.next#popular").attr("disabled", true);
            }
            $("em#PopularRecipePage").text("   " + page + "   ");
            RecipeGetter(RecipesPerPage, author, which, page, single, element, url, buttons);


            // retrieve next "Newest Recipes" page
            $("button.next#newest").click(function () {
                var RecipesPerPage = "3";
                var author = "#";
                var which = "newest";
                var nextPageNumber = parseInt($("em#NewestRecipePage").html().replace(/ /g, ''), 10) + 1;
                var page = nextPageNumber.toString();
                var single = "0"; // 1-based counting; if only one recipe from the page: 0 is NOT a single one
                var element = "div.row#newest";
                var url = "{% url 'cookhub:recipe_pagination' %}";
                var buttons = "yes";
                $("button.previous#newest").attr("disabled", false);
                if (nextPageNumber =={{ NewestRecipePages }}) {
                    $("button.next#newest").attr("disabled", true);
                }
                $("em#NewestRecipePage").text("   " + page + "   ");
                RecipeGetter(RecipesPerPage, author, which, page, single, element, url, buttons);
            });

            // retrieve previous "Newest Recipes" page
            $("button.previous#newest").click(function () {
                var RecipesPerPage = "3";
                var author = "#";
                var which = "newest";
                var nextPageNumber = parseInt($("em#NewestRecipePage").html().replace(/ /g, ''), 10) - 1;
                var page = nextPageNumber.toString();
                var single = "0"; // 1-based counting; if only one recipe from the page: 0 is NOT a single one
                var element = "div.row#newest";
                var url = "{% url 'cookhub:recipe_pagination' %}";
                var buttons = "yes";
                $("button.next#newest").attr("disabled", false);
                if (nextPageNumber == 1) {
                    $("button.previous#newest").attr("disabled", true);
                }
                $("em#NewestRecipePage").text("   " + page + "   ");
                RecipeGetter(RecipesPerPage, author, which, page, single, element, url, buttons);
            });

            // retrieve next "Popular Recipes" page
            $("button.next#popular").click(function () {
                var RecipesPerPage = "3";
                var author = "#";
                var which = "popular";
                var nextPageNumber = parseInt($("em#PopularRecipePage").html().replace(/ /g, ''), 10) + 1;
                var page = nextPageNumber.toString();
                var single = "0"; // 1-based counting; if only one recipe from the page: 0 is NOT a single one
                var element = "div.row#popular";
                var url = "{% url 'cookhub:recipe_pagination' %}";
                var buttons = "yes";
                $("button.previous#popular").attr("disabled", false);
                if (nextPageNumber =={{ NewestRecipePages }}) {
                    $("button.next#popular").attr("disabled", true);
                }
                $("em#PopularRecipePage").text("   " + page + "   ");
                RecipeGetter(RecipesPerPage, author, which, page, single, element, url, buttons);
            });

            // retrieve previous "Popular Recipes" page
            $("button.previous#popular").click(function () {
                var RecipesPerPage = "3";
                var author = "#";
                var which = "popular";
                var nextPageNumber = parseInt($("em#PopularRecipePage").html().replace(/ /g, ''), 10) - 1;
                var page = nextPageNumber.toString();
                var single = "0"; // 1-based counting; if only one recipe from the page: 0 is NOT a single one
                var element = "div.row#popular";
                var url = "{% url 'cookhub:recipe_pagination' %}";
                var buttons = "yes";
                $("button.next#popular").attr("disabled", false);
                if (nextPageNumber == 1) {
                    $("button.previous#popular").attr("disabled", true);
                }
                $("em#PopularRecipePage").text("   " + page + "   ");
                RecipeGetter(RecipesPerPage, author, which, page, single, element, url, buttons);
            });




            {% if user.is_authenticated %}
                // save recipes
                $("body").on("click", "button.addRecipeButton", function () {
                    var recipeID = $(this).attr("data-recipeid");
                    $(this).attr("disabled", true);
                    $(this).html("Saved");
                    $.get("{% url 'cookhub:save_recipe' %}",
                        {"recipeID": recipeID})
                });
            {% endif %}

        });
    </script>
{% endblock %}

